{"ast":null,"code":"function removeToken() {\n  localStorage.removeItem('token');\n}\n\nfunction setToken(token) {\n  localStorage.setItem('token', token);\n}\n\nfunction getToken() {\n  let token = localStorage.getItem('token');\n\n  if (token) {\n    const payload = JSON.parse(atob(token.split('.')[1]));\n\n    if (payload.exp < Date.now() / 1000) {\n      localStorage.removeItem('token');\n      token = null;\n    }\n  }\n\n  return token;\n}\n\nfunction getUserFromToken() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split('.')[1])).user : null;\n}\n\nexport default {\n  setToken,\n  getToken,\n  getUserFromToken,\n  removeToken\n};","map":{"version":3,"sources":["/Users/angelinewang/SEI/Token-Based-Authenication-React-Express/token-based-auth/student/react-mastermind/src/utils/tokenService.js"],"names":["removeToken","localStorage","removeItem","setToken","token","setItem","getToken","getItem","payload","JSON","parse","atob","split","exp","Date","now","getUserFromToken","user"],"mappings":"AAAA,SAASA,WAAT,GAAuB;AACnBC,EAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACH;;AAED,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACrBH,EAAAA,YAAY,CAACI,OAAb,CAAqB,OAArB,EAA6BD,KAA7B;AACH;;AAED,SAASE,QAAT,GAAoB;AAChB,MAAIF,KAAK,GAAGH,YAAY,CAACM,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAGH,KAAH,EAAU;AACN,UAAMI,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACP,KAAK,CAACQ,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,CAAhB;;AAEA,QAAIJ,OAAO,CAACK,GAAR,GAAcC,IAAI,CAACC,GAAL,KAAa,IAA/B,EAAqC;AACjCd,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAE,MAAAA,KAAK,GAAG,IAAR;AACH;AACJ;;AACD,SAAOA,KAAP;AACH;;AAED,SAASY,gBAAT,GAA2B;AACvB,QAAMZ,KAAK,GAAGE,QAAQ,EAAtB;AACA,SAAOF,KAAK,GAAGK,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACP,KAAK,CAACQ,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,EAAsCK,IAAzC,GAAgD,IAA5D;AACH;;AAED,eAAe;AACXd,EAAAA,QADW;AAEXG,EAAAA,QAFW;AAGXU,EAAAA,gBAHW;AAIXhB,EAAAA;AAJW,CAAf","sourcesContent":["function removeToken() {\n    localStorage.removeItem('token')\n}\n\nfunction setToken(token) {\n    localStorage.setItem('token',token)\n}\n\nfunction getToken() {\n    let token = localStorage.getItem('token')\n    if(token) {\n        const payload = JSON.parse(atob(token.split('.')[1]));\n\n        if (payload.exp < Date.now() / 1000) {\n            localStorage.removeItem('token');\n            token = null;\n        }\n    }\n    return token;\n}\n\nfunction getUserFromToken(){\n    const token = getToken()\n    return token ? JSON.parse(atob(token.split('.')[1])).user : null;\n}\n\nexport default {\n    setToken,\n    getToken,\n    getUserFromToken,\n    removeToken\n}"]},"metadata":{},"sourceType":"module"}